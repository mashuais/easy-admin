"use strict";(self["webpackChunkvue_event"]=self["webpackChunkvue_event"]||[]).push([[368],{8368:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix header-box",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("文章分类")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addCateBtnFn}},[t._v("添加分类")])],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cateList,border:"",stripe:""}},[e("el-table-column",{attrs:{label:"序号",type:"index",width:"100"}}),e("el-table-column",{attrs:{label:"分类名称",prop:"cate_name"}}),e("el-table-column",{attrs:{label:"分类别名",prop:"cate_alias"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.updateFn(a.row)}}},[t._v("修改")]),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.removeFn(a.row.id)}}},[t._v("删除")])]}}])})],1)],1),e("el-dialog",{attrs:{title:t.isEdit?"编辑文章分类":"添加文章分类",visible:t.addVisible,width:"35%"},on:{"update:visible":function(e){t.addVisible=e},closed:t.onAddClosedFn}},[e("el-form",{ref:"addRef",attrs:{model:t.addForm,rules:t.addRules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"分类名称",prop:"cate_name"}},[e("el-input",{attrs:{minlength:"1",maxlength:"10"},model:{value:t.addForm.cate_name,callback:function(e){t.$set(t.addForm,"cate_name",e)},expression:"addForm.cate_name"}})],1),e("el-form-item",{attrs:{label:"分类别名",prop:"cate_alias"}},[e("el-input",{attrs:{minlength:"1",maxlength:"15"},model:{value:t.addForm.cate_alias,callback:function(e){t.$set(t.addForm,"cate_alias",e)},expression:"addForm.cate_alias"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"mini"},on:{click:t.cancelFn}},[t._v("取 消")]),e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.addFn}},[t._v("添 加")])],1)],1)],1)},s=[],d=a(7877),r={name:"ArtCate",data(){return{cateList:[],addVisible:!1,addForm:{cate_name:"",cate_alias:""},addRules:{cate_name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{pattern:/^\S{1,10}$/,message:"分类名必须是1-10位的非空字符",trigger:"blur"}],cate_alias:[{required:!0,message:"请输入分类别名",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{1,15}$/,message:"分类别名必须是1-15位的字母数字",trigger:"blur"}]},editId:"",isEdit:!1}},created(){this.initCateListFn()},methods:{addCateBtnFn(){this.addVisible=!0,this.editId="",this.isEdit=!1},async initCateListFn(){const t=await(0,d.I2)();this.cateList=t.data.data},async addFn(){this.$refs.addRef.validate((async t=>{if(!t)return!1;if(this.isEdit){const{data:t}=await(0,d.R4)({id:this.editId,...this.addForm});if(0!==t.code)return this.$message.error("更新分类失败！");this.$message.success("更新分类成功！")}else{const{data:t}=await(0,d.pP)(this.addForm);if(0!==t.code)return this.$message.error("添加分类失败！");this.$message.success("添加分类成功！")}this.initCateListFn(),this.addVisible=!1}))},cancelFn(){this.addVisible=!1},onAddClosedFn(){this.$refs.addRef.resetFields()},updateFn(t){this.editId=t.id,this.isEdit=!0,this.addVisible=!0,this.$nextTick((()=>{this.addForm.cate_name=t.cate_name,this.addForm.cate_alias=t.cate_alias}))},async removeFn(t){const{data:e}=await(0,d.MX)(t);if(0!==e.code)return this.$message.error("删除分类失败！");this.$message.success("删除分类成功！"),this.initCateListFn()}}},n=r,l=a(1001),o=(0,l.Z)(n,i,s,!1,null,"4dbb8f68",null),c=o.exports}}]);
//# sourceMappingURL=368.8da81973.js.map